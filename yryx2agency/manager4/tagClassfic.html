<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>标签分类</title>
<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/bootstrap-fileupload.css" rel="stylesheet">
<style>
#actorlist td {vertical-align:middle;}
#actorlist th {text-align:center;}
</style>
<!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
</head>
<body>
<!--导航-->
<div class="container">
  <nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button>
        <a class="navbar-brand" href="actorManage.html">管理后台</a> </div>
      
      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav">
          <li><a href="actorManage.html">演员资料库</a></li>  
          <li><a href="movieInfo.html">影视资料库</a></li>
          <li> <a href="movieAgency.html">经纪公司管理</a></li>
          <li class="dropdown active"> <a href="movieTag.html" class="dropdown-toggle" data-toggle="dropdown">标签管理 <span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
              <li><a href="tagClassfic.html">标签分类管理</a></li>
              <li class="divider"></li>
              <li><a href="movieTag.html">影视标签管理</a></li>
              <li class="divider"></li>
              <li><a href="actorTag.html">角色标签管理</a></li>
            </ul>
          </li>
          <li class="dropdown"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">账号管理 <span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
              <li><a href="agenyuser.html">经纪公司账号</a></li>
              <li class="divider"></li>
              <li><a href="usermanage.html">系统子账号</a></li>
            </ul>
          </li>
          <li><a href="appealManage.html">申诉管理</a></li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <li class="dropdown"> <a href="#" data-toggle="dropdown" class="dropdown-toggle">用户名 <span class="caret"></span></a>
            <ul class="dropdown-menu" role="menu">
              <li><a href="modifypwd.html">修改密码</a></li>
             <!-- <li><a href="#">子账号管理</a></li>-->
              <li class="divider"></li>
              <li><a href="login.html">退出</a></li>
            </ul>
          </li>
        </ul>
      </div>
      <!-- /.navbar-collapse --> 
    </div>
    <!-- /.container-fluid --> 
  </nav>
</div>

<!--导航下面的指示框-->
<div class="container">
  <ol class="breadcrumb">
    <li><h3>标签管理</h3></li>
    <li class="active">标签分类管理</li>
    <li><a href="movieTag.html">影视标签管理</a></li>
    <li><a href="actorTag.html">角色标签管理</a></li>
  </ol>
</div>

<!--搜索和编辑公司按钮-->
<div class="container">
  <div class="row">
    <div class="col-lg-4">
      <form class="inline input-group" action="" method="get">
        <input type="text" class="form-control">
        <span class="input-group-btn">
        <button type="submit" class="btn btn-default">搜索</button>
        </span>
      </form>
    </div>
    <div class="col-lg-2 pull-right text-right"> <a href="#addClassfic" class="btn btn-primary" data-toggle="modal" data-target="#addClassfic">添加分类</a> </div>
  </div>
</div>

<!--表格-->
<div class="container">
	<div class="row container">
      <form role="form" class="form-horizontal page-header">
        <div class="form-group container">
            <label class="control-label pull-left"><h4>共有XXX组标签</h4></label>
            <div class="pull-right">
                <select class="form-control input-sm">
                    <option value="all">显示全部</option>
                    <option value="movieTag">只显示影视标签</option>
                    <option value="actoeTag">只显示角色标签</option>
                </select>
            </div>
        </div>
      </form>
	</div>
  <table class="table table-bordered table-hover text-center" id="actorlist">
    <thead>
      <tr>
      	<th>排序号</th>
        <th>表签名</th>
        <th>图标</th>
        <th>标签分类</th>
        <th>标签限制</th>
        <th>隐形分类</th>
        <th>编辑</th>
      </tr>
    </thead>
    <tbody id="tagList">
      <tr id="tag1">
      	<td>1</td>
        <td>语言能力</td>
        <td><img src="http://placehold.it/50x50" alt=""/></td>
        <td>角色</td>
        <td>3</td>
        <td>无隐性分类</td>
        <td>
        	<ul class="list-unstyled list-inline">       	
                <li><a href="#modifyTag" data-toggle="modal" data-target="#modifyTag">编辑</a></li>
                <li><a href="#DelConfirm" data-toggle="modal" data-target="#DelConfirm">删除</a></li>
            </ul>
        </td>
      </tr>
      <tr id="tag2">
      	<td>2</td>
        <td>艺术特长</td>
        <td><img src="http://placehold.it/50x50" alt=""/></td>
        <td>角色</td>
        <td>1</td>
        <td>10岁到20岁之间<input type="hidden" value="ageless20"></td>
        <td>
        	<ul class="list-unstyled list-inline">       	
                <li><a href="#modifyTag" data-toggle="modal" data-target="#modifyTag">编辑</a></li>
                <li><a href="#DelConfirm" data-toggle="modal" data-target="#DelConfirm">删除</a></li>
            </ul>
        </td>
      </tr>
      <tr id="tag3">
      	<td>3</td>
        <td>影片标签</td>
        <td><img src="http://placehold.it/50x50" alt=""/></td>
        <td>影视</td>
        <td>0</td>
        <td>无隐性分类</td>
        <td>
        	<ul class="list-unstyled list-inline">       	
                <li><a href="#modifyTag" data-toggle="modal" data-target="#modifyTag">编辑</a></li>
                <li><a href="#DelConfirm" data-toggle="modal" data-target="#DelConfirm">删除</a></li>
            </ul>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<!--分页-->
<div class="container text-right">
  <ul class="pagination pagination-sm pull-right" id="fenye">
    <!--<li><a href="#">&laquo;</a></li>
    <li class="active"><a href="#">1</a></li>
    <li><a href="#">2</a></li>
    <li><a href="#">3</a></li>
    <li><a href="#">4</a></li>
    <li><a href="#">5</a></li>
    <li><a href="#">&raquo;</a></li>-->
  </ul>
</div>

<!--添加分类弹出层-->
<div class="modal fade" id="addClassfic" tabindex="-1" role="dialog" aria-labelledby="myModalLabe1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header"> <a href="#" class="close" data-dismiss="modal">×</a>
        <h4>添加分类</h4>
      </div>
      <div class="modal-body" style="position:relative;">
        <form class="form-horizontal" action="" method="post" role="form">
          <div class="form-group">
            <label class="control-label col-lg-2"><span style="color:#F00">*</span>分类名称</label>
            <div class="col-lg-4">
              <input type="text" name="typeName" class="form-control" placeholder="输入新类型名字">
            </div>
          </div>
          <div class="form-group">
          	<label class="control-label col-lg-2">排序号</label>
            <div class="col-lg-4">
            	<input type="text" class="form-control listCount" value="" placeholder="请输入排序号" />
            </div>
          </div>
          <div class="form-group">
          	<label class="control-label col-lg-2">标签分类</label>
            <div class="col-lg-4">
            	<select name="types" class="form-control">
                	<option value="movie">影视标签</option>
                    <option value="actor">角色标签</option>
                </select>
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-lg-2">分类限制</label>
            <div class="col-lg-3">
              <label class="control-label radio-inline">
              	<input type="radio" name="choice" value="one" checked>单选
              </label>
              <label class="control-label radio-inline">
             	<input type="radio" name="choice" value="many">多选
              </label>
            </div>
            <div class="form-group">
            	<!--<label class="control-label" for="choicelen">限选个数</label>-->
                <div class="col-lg-3">
            	<input type="text" name="choicelen" id="choicelen" placeholder="填写限制的数目" class="choicelen">
                <p class="help-block">填0为无限制</p>
                </div>
            </div>
          </div>
          <div class="text-center form-group" style="position:absolute;top:10px;right:100px;">
              <label class="control-label">分类图片</label>
              <div class="controls">
                <div class="fileupload fileupload-new" data-provides="fileupload">
                  <div class="fileupload-new thumbnail" style="width: 50px; height: 50px;"> <img src="http://placehold.it/50x50" alt="" /></div>
                  <div class="fileupload-preview fileupload-exists thumbnail" style="max-width: 50px; max-height: 50px; line-height: 10px;"></div>
                  <div>
                    <span class="btn btn-file btn-default btn-sm">
                        <span class="fileupload-new">上传图片</span>
                        <span class="fileupload-exists">替换</span>
                        <input type="file" class="default" name="personImage"/>
                    </span>
                    <a href="#" class="btn fileupload-exists btn-default btn-sm" data-dismiss="fileupload">删除</a>
                 </div>
                </div>
              </div>
          </div>
          <div class="form-group">
          	<label class="control-label col-lg-2">其他分类</label>
            <div class="col-lg-4">
            	<select name="othertypes" class="form-control">
                	<option value="noother">无隐形分类</option>
                    <option value="man">性别-男</option>
                    <option value="female">性别-女</option>
                    <option value="ageless10">年龄-10岁以下</option>
                    <option value="ageless20">年龄-10岁到20岁</option>
                    <option value="ageless30">年龄-20岁到30岁</option>
                    <option value="ageless40">年龄-30到40岁</option>
                </select>
            </div>
          </div>
          <div class="modal-footer form-actions">
         	<button type="submit" class="btn btn-primary btn-save">确定</button>
            <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!--用户修改-->
<div class="modal fade" id="modifyTag" tabindex="-1" role="dialog" aria-labelledby="myModalLabe3" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header"> <a href="#" class="close" data-dismiss="modal">×</a>
        <h4>修改标签</h4>
      </div>
      <div class="modal-body" style="position:relative;">
        <form class="form-horizontal" action="" method="post" role="form">
          <div class="form-group">
            <label class="control-label col-lg-2">标签名</label>
            <div class="col-lg-4">
              <input type="text" name="tagName" class="form-control tagName">
            </div>
          </div>
          <div class="form-group">
          	<label class="control-label col-lg-2">排序号</label>
            <div class="col-lg-4">
            	<input type="text" class="form-control listCount" value="" placeholder="请输入排序号" />
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-lg-2">分类限制</label>
            <div class="col-lg-3">
              <label class="control-label radio-inline">
              	<input type="radio" name="choice" value="one" class="oneradio">单选
              </label>
              <label class="control-label radio-inline">
             	<input type="radio" name="choice" value="many" class="manyradio">多选
              </label>
            </div>
            <div class="form-group">
            	<!--<label class="control-label" for="choicelen">限选个数</label>-->
                <div class="col-lg-4">
            	<input type="text" name="choicelen" id="choicelen" placeholder="填写限制的数目" class="choicelen">
                <p class="help-block">填0为无限制</p>
                </div>
            </div>
          </div>
		  <div class="text-center form-group" style="position:absolute;top:10px;right:80px;">
              <label class="control-label">分类图片</label>
              <div class="controls">
                <div class="fileupload fileupload-new" data-provides="fileupload">
                  <div class="fileupload-new thumbnail" style="width: 50px; height: 50px;"> <img src="#" alt="" id="modifyImg" /></div>
                  <div class="fileupload-preview fileupload-exists thumbnail" style="max-width: 50px; max-height: 50px; line-height: 10px;"></div>
                  <div>
                    <span class="btn btn-file btn-default btn-sm">
                        <span class="fileupload-new">替换</span>
                        <span class="fileupload-exists">替换</span>
                        <input type="file" class="default" name="personImage"/>
                    </span>
                    <a href="#" class="btn fileupload-exists btn-default btn-sm" data-dismiss="fileupload">删除</a>
                 </div>
                </div>
              </div>
          </div>          
          <div class="form-group">
          	<label class="control-label col-lg-2">其他分类</label>
            <div class="col-lg-4">
            	<select name="othertypes" class="form-control othertypes">
                	<option value="noother">无隐性分类</option>
                    <option value="man">性别-男</option>
                    <option value="female">性别-女</option>
                    <option value="ageless10">年龄-10岁以下</option>
                    <option value="ageless20">年龄-10岁到20岁</option>
                    <option value="ageless30">年龄-20岁到30岁</option>
                    <option value="ageless40">年龄-30到40岁</option>
                </select>
            </div>
          </div>
          <input type="hidden" name="modifyId" id="modifyId" value="">
          <div class="modal-footer form-actions">
         	<button type="submit" class="btn btn-primary btn-save">保存</button>
            <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div><!--modal-->

<div class="modal fade" id="DelConfirm" tabindex="-1" role="dialog" aria-labelledby="myModalLabe2" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header"> <a href="#" class="close" data-dismiss="modal">×</a>
        <h4>删除标签</h4>
      </div>
      <div class="modal-body">
        <form class="form-horizontal" action="actorManage.html" method="post" role="form">
          <div class="form-group">
          	<span class="col-xs-offset-1">您确认要删除该标签分类吗？删除后不能恢复。</span>
            <input type="hidden" name="id" value="" class="DelId">
          </div>
          <div class="modal-footer form-actions">
          	<button type="submit" class="btn btn-primary btn-save">确认</button>
            <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>     
          </div>
        </form>
      </div><!--body-->
    </div><!--content-->
  </div><!--dialog-->
</div><!--modal-->

<script src="js/jquery1.10.3_20130911.min.js"></script> 
<script src="js/bootstrap.js"></script> 
<script src="js/bootstrap-fileupload.js"></script>
<script>
//删除确定
$(function(){
	$("#tagList").find("a[href='#DelConfirm']").on('click',function(){
		//alert($(this).parent().parent().parent().parent().attr("id"));
		$("#DelConfirm").find(".DelId").val($(this).parent().parent().parent().parent().attr("id"));
	});	
});
//修改界面的初始化
$(function(){
	$("input[name='choice']").on("click",function(){
		if($(this).val()="one"){
			if($(this).attr("checked")=="checked"){
				$(".choicelen").attr("disabled","disabled");	
			}else{
				$(".choicelen").removeAttr("disabled");	
			}
		}else{
			if($(this).attr("checked")=="checked"){
				$(".choicelen").removeAttr("disabled");	
			}else{
				$(".choicelen").attr("disabled","disabled");
			}	
		}
	});
	$("a[href='#modifyTag']").on('click',function(){
		$tr=$(this).parent().parent().parent().parent();
		$("#modifyTag").find(".tagName").val($tr.children("td:eq(1)").html());
		if($tr.children("td:eq(3)").html()!=1){
			$("#modifyTag").find(".manyradio").attr("checked","checked");
			$("#modifyTag").find("#choicelen").removeAttr("disabled");
			$("#modifyTag").find("#choicelen").val($tr.children("td:eq(4)").html());
		}else{
			$("#modifyTag").find(".oneradio").attr("checked","checked");
			//$("#modifyTag").find("#choicelen").attr("disabled","disabled");	
			$("#modifyTag").find("#choicelen").val("");
		}
		$("#modifyTag").find(".othertypes").val($tr.children("td:eq(5)").find("input").val());
		$("#modifyTag").find("#modifyId").val($tr.attr("id"));
		$("#modifyImg").attr("src",$tr.children("td:eq(2)").children().attr("src"));
		$("#modifyTag").find(".listCount").val($tr.children("td:eq(0)").html());
	});
	
});
//分页
window.onload=function(){
		page({
			id:'fenye',
			nowpage:1,
			allpage:10,
			callback:function(now,all){
				window.alert("当前页："+ now + ",总共页：" + all);
			}
		});//函数的参数是比较厉害的json格式，如果要改进的话直接改最后的callback函数就可以完成任意功能
		return false;//阻止点击超链接跳转页面
	};
	function page(opt){
		if(!opt.id){return false;}//没有取到id的话就可以直接down了
		var obj = document.getElementById(opt.id);//获取对象
		var nowpage=opt.nowpage || 1;//获取当前页码，或者直接默认为1
		var allpage=opt.allpage || 5;//获取总的页面，或者默认为5
		
		if(allpage>=6 && nowpage>=4){//总页码大于6或者当前页码大于4的时候才会出现首页字符
			var oa=document.createElement('a');
			var oLi=document.createElement('li');
			oa.href = '#' + 1;
			oa.innerHTML="首页";
			oLi.appendChild(oa);
			obj.appendChild(oLi);
		}
		if(nowpage>=2){//当前页码大于2的时候就出现上一页
			var oa=document.createElement('a');
			var oLi=document.createElement('li');
			oa.href = '#' + (nowpage-1);
			oa.innerHTML="上一页";
			oLi.appendChild(oa);
			obj.appendChild(oLi);
		}
		if(allpage<=5){//总的页面小于5的时候直接把所有的页码都打出来就行了，没那么多废话
			for (var i = 1; i <= allpage; i++) {
				var oa = document.createElement('a');
				var oLi=document.createElement('li');
				oa.href = '#' + i;
				oa.innerHTML=i;
				if (i == nowpage) {
					oLi.className="active";
				}
				oLi.appendChild(oa);
				obj.appendChild(oLi);
			}
		}else{//总页码超过5的话，默认只出现5个页码，以当前页码为中心，向前两个，向后两个
			for(var i=1;i<=5;i++){
				var oa=document.createElement('a');
				var oLi=document.createElement('li');
				if (nowpage == 1 || nowpage == 2) {//如果当前页码为1或者2的话，也打印5个页码，但是不能向前出现打2个页码了
					oa.href = '#' + i;
					oa.innerHTML=i;
					if (nowpage == i) {
						oLi.className="active";
					}
					oLi.appendChild(oa);
					obj.appendChild(oLi);
				}else if((allpage-nowpage)==1||(allpage-nowpage)==0){//当前页码为最后两个页码的时候，和前面类似
					oa.href='#'+(allpage-5+i);
					oa.innerHTML=(allpage-5+i);
					if((allpage-nowpage==0)&&i==5){
						oLi.className="active";
					}else if((allpage-nowpage==1)&&i==4){
						oLi.className="active";
					}
					oLi.appendChild(oa);
					obj.appendChild(oLi);
				}
				else {
					oa.href = '#' + (nowpage - 3 + i);//好吧，最普遍的情况，以当前为中心，+-2个页码就可以了，注意的是，当前页码没有中括号
					oa.innerHTML=(nowpage-3+i);
					if (i == 3) {
						oLi.className="active";
					}
					oLi.appendChild(oa);
					obj.appendChild(oLi);
				}
			}
		}
		if((allpage-nowpage>=3)&&allpage>=6){//如果总页码超过6，并且当前页码为倒数第三个以后的话出现尾页
			var oa=document.createElement('a');
			var oLi=document.createElement("li");
			oa.href = '#' + allpage;
			oa.innerHTML="尾页";
			oLi.appendChild(oa);
			obj.appendChild(oLi);
		}
		if((allpage-nowpage>=1)){//只要不是最后一页，就出现下一页
			var oa=document.createElement('a');
			var oLi=document.createElement("li");
			oa.href = '#' + (nowpage+1);
			oa.innerHTML="下一页";
			oLi.appendChild(oa);
			obj.appendChild(oLi);
		}
		opt.callback(nowpage,allpage);//判断完哪个页码的话，调用一下函数，这里就简单弹出当前页码和总的页码，要是加入操作的话最好就在这个函数做手脚
		var aA=obj.getElementsByTagName('a');
		for(var i=0;i<aA.length;i++){//给每个页码都添加分页函数
			aA[i].onclick=function(){
				var nowpage = parseInt(this.getAttribute('href').substring(1));//获取当前页码数
				obj.innerHTML='';//将当前div里边已经打印的页码清空，然后在打出页码就行了，类似于刷新
				page({
					id:opt.id,
					nowpage:nowpage,
					allpage:opt.allpage,
					callback:opt.callback
				});
				return false;
			};
		}
	}
</script>
</body>
</html>
